2005-02-18  Tomas Cerha  <cerha@brailcom.org>

	* lcg/content.py (_ChoiceTask.__init__): Assertion added.
	(_ChoiceTask.correct_choice): New method.
	(Exercise._AUDIO_VERSION_LABEL): Removed.
	(Exercise.__init__): Don't allocate the JavaScript code resource.
	(Exercise._export_instructions): Use `self._export_recording()'
	and `self._export_audio_version()'.
	(Exercise._export_recording): New method.
	(Exercise._export_audio_version): New method.
	(SentenceCompletion._AUDIO_VERSION_LABEL): Removed.
	(SentenceCompletion._export_audio_version): New method.
	(_InteractiveExercise): New class.
	(_FillInExercise): New class.
	(_Cloze): Class removed.
	(Cloze): Derive from `_FillInExercise', not `_Cloze'.
	(_ChoiceBasedExercise): Derive from `_InteractiveExercise', not
	`Exercise'.
	(_ChoiceBasedExercise._FORM_HANDLER): New constant.
	(_ChoiceBasedExercise._answer_control): Completely rewritten.
	(_ChoiceBasedExercise._answers): New method.
	(_ChoiceBasedExercise._results): Method removed.
	(_ChoiceBasedExercise._buttons): New method.
	(_ChoiceBasedExercise._format_choice): Pass the `Choice' to
	`self._answer_control()'.
	(TrueFalseStatements._format_choice): Pass the `Choice' to
	`self._answer_control()'.
	(VocabExercise, Transformation, Dictation): Derive from
	`_FillInExercise', not `_Cloze'.

	* lcg/_html.py (_attr, _input): New functions.
	(field, button): Reimplemented using `_input()'.
	(reset, hidden, radio): New functions.
	(link): Use `_attr()'.

	* resources/css/default.css (results): Minor improvements.

	* resources/scripts/exercises.js (eval_choice, reset_choices)
	(display_choice_results, init_cloze_form, eval_cloze_field)
	(handle_cloze_field_keypress, fill_cloze, eval_cloze): Functions
	removed and replaced by handler class methods.
	(Handler, ChoiceBasedExerciseHandler, FillInExerciseHandler): New
	classes.

2005-02-16  Tomas Cerha  <cerha@brailcom.org>

	* translations/de.po: Updated.

	* lcg/wiki.py (CommonFormatter._rules): The `wikilink' rule removed.
	(CommonFormatter._wikilink_formatter): Method removed.

	* lcg/course.py (RootNode): Docstring updated.

	* lcg/content.py (VocabExercise2): Class removed.

	* lcg/resources.py (Transcript._export): Encode the text to UTF-8
	before writing.

2005-02-15  Tomas Cerha  <cerha@brailcom.org>

	* lcg/content.py (ClozeTask.plain_text): New method.
	(Exercise._AUDIO_VERSION_REQUIRED, Exercise._AUDIO_VERSION_LABEL):
	New constants.
	(Exercise.__init__): New argument `audio_version'.  Create the
	transcript using the `_create_transcript()' method.  Make sure the
	`audio_version' was specified if `self._AUDIO_VERSION_REQUIRED' is
	true.
	(Exercise._create_transcript): New method.
	(Exercise._sound_controls): New method.
	(Exercise._export_instructions): Use it for both the recording and
	the audio version.
	(Cloze._RECORDING_REQUIRED): Unset.
	(SentenceCompletion._AUDIO_VERSION_REQUIRED): Set to True.
	(SentenceCompletion._AUDIO_VERSION_LABEL): Set.
	(SentenceCompletion._instructions): Teext improved.
	(Cloze._create_transcript): New method.
	(Cloze._instructions): The condition corrected.
	(Substitution): New class.

2005-02-14  Tomas Cerha  <cerha@brailcom.org>

	* lcg/feed.py (ExerciseFeeder._exercise): Cosmetical improvement.

	* lcg/resources.py (Media._FORCE_OUTPUT_FORMAT): New constant.
	(Media.__init__): Change the format if `_FORCE_OUTPUT_FORMAT' is set.
	(Media._export): Raise the exception as an `Exception' instance.
	(Transcript.__init__): New argument `text'.
	(Transcript._check_file, Transcript._check_file): New methods.

2005-02-10  Tomas Cerha  <cerha@brailcom.org>

	* lcg/course.py (ContentNode._read_file): New argument `comment'.
	Omit the matching lines from the source file.
	(Unit._create_exercises): Pass the comment regexp to to
	`_read_file()'.

	* lcg/feed.py (Feeder._current_input_position): New argument
	`object'.  Return None here.
	(Feeder._panic, Feeder._warn): Test the result of
	`_current_input_position()' for None.
	(FileFeeder._current_input_position): Use the line number from the
	argument, if given.
	(SplittableTextFeeder._current_input_position): Use the given
	`SplittableText' instance, if given.
	(ExerciseFeeder._exercise): Check for `SentenceCompletion'
	corrected.  Pass current piece of text to `_panic()'.  Check for
	`TrueFalseStatements' added.
	(ExerciseFeeder._read_task): Pass current piece of text to
	`_panic()'.

2005-01-19  Tomas Cerha  <cerha@brailcom.org>

	* lcg/course.py (Unit._create_content): Pass the vocabulary items
	to the `ExerciseFeeder' constructor.
	(Unit._create_exercises): Read all five sections from the source
	file.
	

	* lcg/feed.py (ExerciseFeeder.__init__): New keyword argument
	`vocabulary'.
	(ExerciseFeeder._exercise): Allow also exercises with no tasks.
	Automatically generate tasks for `VocabExercise'.

	* lcg/content.py (VocabExercise.__init__): Removed.
	(VocabExercise._create_task): Removed.

2005-01-18  Tomas Cerha  <cerha@brailcom.org>

	* lcg/resources.py (Resource.__init__): Expect the source files in
	the SUBDIR.
	(Media._find_source_file): Search also the `Transcript' source
	directory.

	* lcg/course.py (ContentNode._input_file): New method.
	(ContentNode._read_file): Use it.
	(InnerNode._create_content): Minor change in TOC title.
	(_ExerciseNode, VocabularyPractice, ExerciseNode)
	(ListeningComprehension, GeneralComprehension, GrammarPractice)
	(Consolidation): Removed.
	(Unit._create_content): Pass the full path to the input file to
	`ExcelVocabFeeder'.  Use `self._create_exercises()' to create the
	`Exercises' section content.  Wrap the sections to a Container to
	be able to specify the `toc_depth' here.
	(Unit._create_exercises): New method.

	* lcg/feed.py (FileFeeder.__init__): Arguments `dir' and `file'
	replaced just by one `filename'.
	(FileFeeder._input_file): Removed.
	(FileFeeder._current_input_position): Use just the attribute
	`self._filename' instead of `self._input_file()'.
	(PySpecFeeder): Docstring updated.
	(PySpecFeeder._input_file): Removed.
	(PySpecFeeder._get_module): Get the dirname and modulename out of
	`self._filename'.
	(ExcelVocabFeeder.feed): Use just the attribute
	`self._filename' instead of `self._input_file()'.

	* lcg/content.py (Content.__init__): Initialize `self._container'.
	(Content.set_container, Content.container)
	(Content._container_path): New methods.
	(Container.__init__): Argument `parts' renamed to `content'.
	Allow a sequence of 'Content' instances, as well as a `Content'
	instance as `content' argument.  Set the container for all
	contained elements.  Don't insert TOC into the contents, just
	remember it as a separate attribute `self._toc'.
	(Container.export): Honour the constructor changes.
	(Section): Docstring rewritten.
	(Section._HEADING_LEVEL): Removed.
	(Section.__init__): Argument `contains_children' removed.  New
	argument `toc_depth'.  Pass it to parent's constructor.  Don't
	deal with the subsections here, leave it up to the parent class.
	(Section.contains_children): Removed.
	(Section.title): Substitute the section number here.
	(Section.anchor): Include the section numbers of all parent
	sections in the hierarchy.
	(Section._header): Set the heading level according to the depth in
	the section hierarchy.
	(Section._section_path, Section.section_number): New methods.
	(TableOfContents.__init__): The argument `local' removed.
	(TableOfContents._make_toc): Don't consider self._local and
	`Section.contains_children'.

2005-01-14  Tomas Cerha  <cerha@brailcom.org>

	* lcg/course.py (ContentNode._TOC_TITLE): Constant removed.
	(ContentNode._ABBREV_TITLE): New constant.
	(ContentNode.__init__): When `self._create_content()' returns a
	sequence, wrap it into a `Container'.
	(ContentNode._create_content): Docstrint updated.
	(ContentNode._id): Docstrint updated.
	(ContentNode._title): New method.
	(ContentNode._abbrev_title): New method.
	(ContentNode.sections): New method.
	(ContentNode.url): New method.
	(ContentNode.subdir): Docstrint updated.
	(ContentNode.title): New keyword arguemnt `abbrev'.  Reimplemented
	using the new methods `_title()' and `_abbrev_title()'.
	(ContentNode.toc_title): Method removed.
	(ContentNode.full_title): Docstrint updated.
	(ContentNode.has_index): Method removed.
	(InnerNode._create_content): Add a `TableOfContents' after the
	intro text.
	(InnerNode.title): Removed.
	(InnerNode._title): New method.
	(RootNode.has_index): Removed.
	(Vocabulary): Class removed.
	(Grammar): Class removed.
	(_ExerciseNode): New class.
	(VocabularyPractice): Derive from `_ExerciseNode'.
	(VocabularyPractice._create_content): Create just one exercise.
	(ExerciseNode): Derive from `_ExerciseNode'.
	(GeneralComprehension): New class.
	(ListeningComprehension._TITLE): Changed.
	(Summary): Class removed.
	(Unit): Derive from `ContentNode', not `InnerNode'.
	(Unit._TOC_TITLE, Unit._TITLE): New constants.
	(Unit._create_content): Completely reimplemented -- create
	everything except for exercises as inline section.
	(Unit._create_children): Create only the `ExerciseNode' sections.
	(Unit.title): Removed.
	(Unit._abbrev_title): New mothod.
	(Unit._title): New mothod.
	(ExerciseInstructions.title): New keyword arguemnt `abbrev'.
	(ExerciseInstructions.src_dir): New method.
	(CourseIndex): New class.
	(Instructions._create_content): New method.
	(EurochanceCourse.has_index): Removed.
	(EurochanceCourse._create_children): Create also the `CourseIndex'.

	* lcg/ims.py (_Manifest._create_item): Use `ContentNode.url()'
	instead of `ContentNode.output_file()'.
	

	* lcg/export.py (StaticExporter._wrap_content): Use list
	comprehension.  Use `ContentNode.url()' instead of
	`ContentNode.output_file()'.
	(StaticExporter._link): Use `ContentNode.url()' instead of
	`ContentNode.output_file()'.

	* lcg/content.py (Content.sections): New method.
	(Content.parent): New method.
	(Section, SubSection, SubSubSection, TableOfContents)
	(Container.__init__): New arguments `toc_depth' and `toc_local'.
	Prepend a `TableOfContents' to the parts when there is more than
	one `Section' contained.
	(Container.sections): New method.
	(Exercise): Derive from `Section'.
	(Exercise._RECORDING_REQUIRED): New constant.
	(Exercise.__init__): Honour the two changes above.
	(Exercise._header): Removed.
	(Exercise._results): New method.
	(_Cloze): New class.
	(Cloze): Derive from it.  All methods except for `_instructions()'
	moved to `_Cloze.
	(TrueFalseStatements._instructions)
	(MultipleChoiceQuestions._instructions, Selections._instructions)
	(GapFilling._instructions, VocabExercise._instructions)
	(VocabExercise2._instructions, Transformation._instructions):
	Instructions simplified and wrapped by gettext.
	(Dictation, Transformation, VocabExercise): Derive from `_Cloze',
	not `Cloze'.
	(SentenceCompletion): Derive from `Exercise' not `Cloze'..

	* lcg/_html.py (h, b): New functions.

2005-01-13  Tomas Cerha  <cerha@brailcom.org>

	* lcg/feed.py (Feeder._current_input_position)
	(Feeder._current_input_position, Feeder._current_input_position)
	(FileFeeder._current_input_position): New methods.
	(SplittableTextFeeder): Descend from `Feeder'.
	(SplittableTextFeeder.__init__): Always expect just a
	`SplittableText' instance as an argument.
	(SplittableTextFeeder._pieces): Don't reduce the sequence.  There
	is just one `SplittableText' instance in `self._text'.
	(SplittableTextFeeder.__init__): New method.
	(ExcelVocabFeeder.feed): Use `self._panic()'.
	(ExcelVocabFeeder.feed): Use `self._warn()'.
	(ExerciseFeeder._panic): Method removed.
	(ExerciseFeeder._exercise): Check the tasks for
	`SentenceCompletion' /temporary hack/.
	(ExerciseFeeder._exercise, ExerciseFeeder._read_task): Don't pass
	filename and linenumber to `self._panic()'.

	* lcg/export.py (StaticExporter._div, StaticExporter._toc)
	(StaticExporter._make_toc): Methods removed.
	(StaticExporter._link): Use the `link()' function from `_html'.
	Unused keyword argument `title' removed /always use
	`node.title()'/.  Use the abbreviated title for label.
	(StaticExporter._navigation): Use just "Up" instead of
	`node.toc_title()'.  Use `div()' instead of `self._div()'.

	* lcg/_html.py: Import `operator' and `types'.
	(div): New function.
	(link): New arguments `hotkey' and `title'.  Order of keyword
	arguments changed.

	* lcg/resources.py: Import `codecs' and everything from `util'.

	* translations/Makefile: New file.

	* Makefile: File removed from CVS.

2005-01-07  Tomas Cerha  <cerha@brailcom.org>

	* lcg/util.py (camel_case_to_lower): New function.

	* lcg/export.py (StaticExporter._toc): Use
	`ContentNode.has_index()' instead of testing node class.

	* lcg/course.py (ContentNode.__init__): Store the children in the
	order as returned by `_create_children()', not as registered.
	(ContentNode._register_child): Append registered children to
	`self._registered_children', not `self._children'.
	(ContentNode._id): Use `camel_case_to_lower()'.
	(ContentNode.has_index, InnerNode.has_index, RootNode.has_index):
	New method.
	(Unit._id, Unit.title): Don't add one to the index.
	(ExerciseInstructions): New class.
	(Instructions): New class.
	(EurochanceCourse._create_children): Add `Instructions' as a first
	node.

	* lcg/content.py (Exercise._used_types): New class variable.
	(Exercise.__init__): Append the exercise class to
	`Exercise._used_types' if it is not already there.
	(Exercise.task_type): Cosmetical changes.
	(Exercise.task_type, Exercise.name, Exercise.id) 
	(Exercise.used_types): New methods.
	(Dictation._NAME): New constant.
	(Exercise._export_instructions): Append a link to detailed
	instructions to the end of inline instructions.

2005-01-06  Tomas Cerha  <cerha@brailcom.org>

	* lcg/export.py: Import everything from `resources' instead of
	`content'.
	(StaticExporter._wrap_content): Use `ContentNode.resource()'
	instead of `ContentNode.stylesheet()'.

	* lcg/course.py: Import everything from `resources'.
	(ContentNode.__init__): Use `ContentNode.resource()' instead of
	`ContentNode.stylesheet()'.
	(_resource): Removed.
	(ContentNode.resource): New method /transformed from
	`_resource()'/.
	(media, script, stylesheet): Removed.
	(Unit._create_children): Use a list comprehension instead of
	creating each child separately.
	(ContentNode.subdir): Return an empty string for the root node.
	(ContentNode.src_dir): Return just `self._subdir' for the root node.
	(RootNode.__init__): Argument `dir' removed.  Pass args and kwargs
	as they are.  Only sypply None for `parent'.
	(RootNode.src_dir): Removed.

	* lcg/content.py: Import everything from `_html'.
	(Resource, Media, Script, Stylesheet): Moved from here to the new
	`resources' module.
	(_field, _button, _script, _script_write, _speaking_text): Moved
	to the new `_html' module and renamed.
	(VocabList.export, Exercise.export)
	(Exercise._export_instructions, Cloze._results)
	(Cloze._make_field, _ChoiceBasedExercise._answer_control)
	(_ChoiceBasedExercise._results): Use functions from the `_html'
	module instead of the removed methods.
	(VocabItem.__init__, Exercise.__init__, Exercise.__init__)
	(Cloze.__init__, _ChoiceBasedExercise._answer_control): Use
	`ContentNode.resource()' instead of `ContentNode.media()' and
	`ContentNode.script()'.
	(VocabList.__init__): Allocate the `audio.js' script.

	* lcg/resources.py (Module): New module.  
	(Resource, Media, Script, Stylesheet): Moved here from the
	`content' module.
	(Transcript): New class.
	(Resource.__init__): Argument `check_file' Removed.  Don't check
	the existence of source file here, just call 'check_file()'
	(Resource._check_file): New method.
	(Media._check_file): New method.

	* lcg/__init__.py: Import everything from `resources'.

2005-01-05  Tomas Cerha  <cerha@brailcom.org>

	* lcg/feed.py: Docstring updated.  Don't import `unicodedata'.
	(Feeder.__init__): Arguments `file' a `dir' removed.  The
	`encoding' argument renamed to `input_encoding'.  Docstring added.
	(FileFeeder): New class.
	(SplittableTextFeeder): New class.
	(PySpecFeeder): Docstring updated.
	(ExcelVocabFeeder): Derive from `FileFeeder'.
	(ExcelVocabFeeder.feed): Don't create the `Media' instance here
	and don't pass it to `VocabItem' constructor.  Return the items as
	a sequence.  Don't wrap them.
	(ExcelVocabFeeder.feed.safe_char): Removed.
	(ExerciseFeeder): Derive from `SplittableTextFeeder'.
	(ExerciseFeeder._EXERCISE_MATCHER)
	(ExerciseFeeder._BLANK_LINE_MATCHER): Renamed to
	`ExerciseFeeder._EXERCISE_SPLITTER' and
	`ExerciseFeeder._BLANK_LINE_SPLITTER'
	(ExerciseFeeder.feed): Don't read the input file.  Take the source
	text from the constructor argument /from `SplittableTextFeeder'/.
	Don't wrap the exercises into a `Container'.  Return them as a
	sequence.
	(ExerciseFeeder._panic): New method.
	(ExerciseFeeder._exercise): `self._BLANK_LINE_MATCHER' ->
	`self._BLANK_LINE_SPLITTER'.
	(ExerciseFeeder._exercise): Use the new `_panic()' method.
	(ExerciseFeeder._read_task): Use the new `_panic()' method.

	* lcg/course.py: Docstring updated.
	(ContentNode): Docstring updated.
	(ContentNode.__init__): Make the `subdir' argument a kayword
	argument which defaults to 'None'.
	(ContentNode._create_child): New method.
	(ContentNode._id): Comment transformed to a docstring.
	(ContentNode._id): Split the CamalCase names with dashes.
	(ContentNode.subdir): Return parents `subdir()' when
	`self._subdir' is None.
	(Resource, Media, Script, Stylesheet): Moved from here to the
	`content' module.
	(Use): Class removed.
	(Vocabulary._create_content): Pass correct arguments to the
	feeder.  Wrap feered output to a `VocabList'.
	(Vocabulary.items): New method.
	(Grammar._TITLE): Changed.
	(VocabularyPractice, ExerciseNode, ListeningComprehension) 
	(GrammarPractice, Consolidation): New classes.
	(Unit._create_children): Completely rewritten.
	(EurochanceCourse._create_children): Use `_create_child()'.

	* lcg/content.py (VocabItem._DIACRITICS_MATCHER)
	(VocabItem._DANGER_CHAR_MATCHER): New constants. 
	(VocabItem.__init__): Argument `media' removed.  Create the
	`Media' instance here.
	(VocabItem.word): New method.
	(VocabItem.word): New method.
	(Exercise.__init__): When `transcript' not defined, make it out of
	`sound_file' filename.
	(VocabExercise): New class.
	(VocabExercise): New class.
	(Resource, Media, Script, Stylesheet): Moved here from the
	`course' module.

	* lcg/util.py (SplittableText.__init__): New argument `input_file'.
	(SplittableText): Documentation updated.
	(SplittableText.__init__): New argument `input_file'.  Docstring added.
	(SplittableText.input_file): New method.
	(SplittableText._create_piece): Pass the `input_file' to the
	constructor and use keyed arguments.

	* lcg/export.py: Import everything from `content'.

2004-12-18  Tomas Cerha  <cerha@brailcom.org>

	* Makefile (en de): Added some preprocessing of wrong unicode files.

	* lcg/wiki.py
	(CommonFormatter._tickethref_formatter)
	(CommonFormatter._changesethref_formatter) 
	(CommonFormatter._reporthref_formatter)
	(CommonFormatter._svnhref_formatter): Removed.
	(CommonFormatter._rules): Removed rules for removed methods.
	(CommonFormatter._wikilink_formatter): Don't look for a page in
	the `page_dict'.

	* lcg/feed.py (ExerciseFeeder._exercise): Pass a `SplittableText'
	instance to `self._read_task()', not a string .
	(ExerciseFeeder._read_task): Convert the `SplittableText' to a
	string before passing to a method.

2004-12-15  Tomas Cerha  <cerha@brailcom.org>

	* bin/generate.py: Set the input encoding to 'utf-8'.

	* lcg/feed.py (ExcelVocabFeeder._TRANSLATION_ORDER): Include just
	the tuple of laguage codes here.
	(ExcelVocabFeeder._ENCODING): New constant.
	(ExcelVocabFeeder.feed): Use the new constants.
	(ExcelVocabFeeder.feed.safe_char): Return an empty string for
	punctuation characters.
	(ExcelVocabFeeder.feed): Report the filename and the
	word for `UnicodeDecodeError'.
	(ExerciseFeeder.feed): Report the filename for
	`UnicodeDecodeError'.
	(ExerciseFeeder._exercise): Use the `text()' method when passing
	the pieces of `SplittableText' to further processing.
	(ExerciseFeeder._read_header): Consider `text' as a string. not
	`SplittableText'.
	(ExerciseFeeder._read_header): Convert the key to a plain string.
	Convert the exercise type to a plain string.


	* lcg/util.py (SplittableText.text): New method.

	* lcg/course.py (ContentNode._read_file): Reportthe filename on
	`UnicodeDecodeError'.
	(Consolidation): Renamed to `Summary'.
	(Summary._TITLE): Reflect the name change. 
	(Unit._create_children): `Consolidation' -> `Summary'.

	* lcg/content.py (Exercise.__init__): Make an assertion to an
	instance of `types.StringTypes'.

2004-12-12  Tomas Cerha  <cerha@brailcom.org>

	* translations/de.po: Translations improved.

2004-12-08  Tomas Cerha  <cerha@brailcom.org>

	* doc/manual.wiki (Vocabulary): Section updated.
	(Transformation): Section updated.

	* lcg/content.py (TrueFalseStatement.__init__): Use gettext to get
	the translated labels.

	* lcg/export.py (StaticExporter._navigation): Use the
	`toc_title()' method of parent node, not of the current one.

	* lcg/feed.py (ExcelVocabFeeder.feed): Use the diacritical
	characters for filenames, but strip the diacritics.  Exclude the
	parent node's language from the translation column order.

	* translations/de.po: New strings added.  Initial dictionary
	translations made.

2004-12-07  Tomas Cerha  <cerha@brailcom.org>

	* translations/de.po: New file.

	* Makefile (LCG_TTS_COMMAND): Export the LCG environment
	variables.  Make the German course as well as the English one.
	Extract the translatable strings and create gettext message
	catalogs.

	* bin/generate.py: New agument language.  Install the gettext
	translator.  Pass the `language' and `encoding' arguments to the
	course constructor. 

	* lcg/content.py (VocabItem.__init__, Choice.__init__)
	(Choice.__init__, TrueFalseStatement.__init__, ClozeTask.__init__)
	(TransformationTask.__init__): Expect the arguments in unicode.
	Don't convert them here.
	(_ChoiceBasedExercise._answer_control): Translate the strings with
	gettext.
	(Exercise._task_type): Renamed to `_TASK_TYPE'.
	(Exercise._name): Renamed to `_NAME.
	(Exercise._header): Translate the strings using gettext.
	(Exercise._export_instructions): Translate the strings using
	gettext.
	(_ChoiceBasedExercise._task_format): Renamed to `_TASK_FORMAT.
	(SentenceCompletion, Transformation, Cloze,
	MultipleChoiceQuestions)
	(Selections, GapFilling): Define `_NAME'.  `_TASK_TYPE' ->
	`_task_type'.

	* lcg/export.py (StaticExporter._navigation, StaticExporter._toc):
	Use gettext to translate language dependent strings.
	(StaticExporter._navigation): Use `node.toc_title()' instead of
	defining the titles here.

	* lcg/feed.py (Feeder.__init__): New keyword argument `encoding'.
	(ExcelVocabFeeder._LANGUAGE_ORDER, ExcelVocabFeeder._CHARSET):
	Removed.
	(ExcelVocabFeeder._TRANSLATION_ORDER): New constant.
	(ExcelVocabFeeder.feed): Don't use `parent.lang()'.  Use
	`self._TRANSLATION_ORDER' instead of
	`ExcelVocabFeeder._LANGUAGE_ORDER' and `ExcelVocabFeeder._CHARSET'
	Convert the `VocabItem' constructor arguments to unicode first.
	(ExerciseFeeder._slitter_matcher,
	ExerciseFeeder._blank_line_matcher)
	(ExerciseFeeder._header_matcher): Renamed to upper case names.
	(ExerciseFeeder.feed): Read the input file through
	`codecs.open()'.
	(ExerciseFeeder._exercise): `self._blank_line_matcher' ->
	`self._BLANK_LINE_MATCHER'.
	(ExerciseFeeder._read_header): `self._header_matcher ->
	`self._HEADER_MATCHER.
	(ExerciseFeeder._read_task): Covert the text to unicode before
	calling the right method. 
	(ExerciseFeeder._read_transformation): Add default brackets to the
	transformation when no brackets found.

	* lcg/course.py: Import `codecs'.
	(ContentNode._TITLE): New constant.
	(ContentNode.__init__): New keyword attributes `language' and
	`input_encoding'.
	(ContentNode._read_file): Open the file using `codecs.open()' and
	use the `input_encoding' passed to the constructor.
	(ContentNode.title): Just return `self.TITLE'.
	(ContentNode.full_title): Use a list comprehension instead of
	`map()'.
	(ContentNode.lang): Removed.
	(ContentNode.language): New method.
	(ContentNode.input_encoding): New method.
	(RootNode.__init__): Pass the keyword arguments to the parent
	class constructor.
	(Media._open_stream_from_tts): Use `codecs.open()' to read the
	transcript file with a direct conversion to unicode.
	(Media._open_stream_from_tts): Encode the text written to the
	pipe.
	(Vocabulary._TITLE, Use._TITLE, Grammar._TITLE, Exercises._TITLE)
	(Consolidation._TITLE, Unit._TITLE): New constants.
	(Use._title, Grammar._title): Removed.
	(Vocabulary._create_content): Pass the `encoding' to the feeder.
	(Exercises._create_content): Pass the `encoding' to the feeder.
	(Unit._create_children): Use a list comprehension instead of
	`map()'.  Pass the keyword arguments to node constructors.
	(Unit.title): Use `self._TITLE' to get the node name.
	(EurochanceCourse._create_children): Use a list comprehension
	instead of `map()'.
	(EurochanceCourse.meta): Values changed.
	(ContentNode._TOC_TITLE): New constant.
	(ContentNode.title): New method.
	(Unit._TOC_TITLE): New constant.

	* lcg/util.py: Import `types'.
	(SplittableText.__init__): Use `isinstance()' with a corresponding
	type for assertions.

2004-11-03  Tomas Cerha  <cerha@brailcom.org>

	* Makefile (LCG_MP3_COMMAND): New variable.
	(LCG_OGG_COMMAND): New variable.
	(all): Export new variables.

	* lcg/course.py (Resource.SUBDIRECTORY, Media.SUBDIRECTORY)
	(Script.SUBDIRECTORY, Stylesheet.SUBDIRECTORY): Renamed to
	`SUBDIR'.
	(Resource.__init__): Initialize the variables `self._src_path' and
	`self._dst_path'.
	(Resource.source_file): Method removed.
	(Resource._find_source_file): New Method.
	(Resource.destination_file): Renamed to `_destination_file'.  Use
	`self._dst_path'.
	(Resource.export, Resource.export): New methods.
	(Media.__init__): Media type assertion.
	(tts_input): Method removed.
	(Media._find_source_file): New Method.
	(Media._command): New Method.
	(Media._open_stream_from_tts): New Method.
	(Media._open_stream_from_encoder): New Method.
	(Media._open_stream_from_encoder): New Method.

	* lcg/content.py (Exercise.__init__): Don't set the `tts_input'
	argument for the Media instance of the recording.

	* lcg/util.py (copy_stream): New function.

2004-10-23  Tomas Cerha  <cerha@brailcom.org>

	* resources/scripts/exercises.js (count):
	(event_key): New function.
	(event_target): New function.
	(highlight): New function.
	(eval_choice): New function.
	(reset_choices): New function.
	(display_choice_results): New function.
	(init_cloze_form): New function.
	(last_correct_char_index): New function.
	(handle_cloze_field_keypress): New function.
	(eval_cloze_field): New function.
	(eval_answer): Function removed.
	(eval_cloze): Don't take the `answers' as argument.
	(fill_cloze): Don't take the `answers' as argument.
	

	* resources/scripts/audio.js (play_audio): Don't set status-bar
	messages.

	* resources/css/default.css: Reflect the changes in page structure.

	* lcg/content.py (Content._field): Cosmetic hanges.
	(Content._button): Always add the `button' class.
	(Content._script): New method.
	(Content._script_write): Use it.
	(Exercise.task_index): Method removed.
	(Exercise.form_name): Renamed to `_form_name'.
	(Exercise._form): New method.
	(Exercise._export_tasks): Method removed.
	(Exercise._init_script): New method.
	(Exercise.export): Print the Javascript code returned by the
	`_init_script()' method after the form.  Don't use
	`_export_tasks()', just map `_export_tasks()' to all tasks.
	(Cloze._init_script): New method.
	(Cloze._results): New method.
	(Cloze._export_tasks): Method removed.
	(Cloze._make_field): Use `self._field()'.
	(_ChoiceBasedExercise._answer_control): Take `task' as argument
	and not form_name and task number.  Use `eval_choice()' as
	javascript handler.
	(Cloze._export_tasks): Removed (transformed to `_results()').
	(_ChoiceBasedExercise._results): New method.
	(_ChoiceBasedExercise._format_choice): Reflect the change in
	`_answer_control()' arguments.
	(TrueFalseStatements._format_choice): Reflect the change in
	`_answer_control()' arguments.

2004-10-22  Tomas Cerha  <cerha@brailcom.org>

	* resources/scripts/exercises.js (eval_answer): New function.

	* resources/css/default.css (a): Styles improved.

	* lcg/feed.py (ExcelVocabFeeder.feed): Don't print warnings on
	untranslated words.
	(ExerciseFeeder._read_task): Don't take the `parent' the first argument.
	(ExerciseFeeder._exercise): Respect it.
	(ExerciseFeeder._read_multiple_choice_question) 
	(ExerciseFeeder._read_gap_fill_statement) 
	(ExerciseFeeder._read_cloze, ExerciseFeeder._read_transformation) 
	(ExerciseFeeder._read_true_false_statement) 
	(ExerciseFeeder._read_multiple_choice_question): Don't take
	`parent' as argument'
	(ExerciseFeeder._read_task): Respect it.

	(ExerciseFeeder._read_selection)
	(ExerciseFeeder._read_multiple_choice_question):

	* lcg/content.py (Content._button): method.
	(Content._field): New method.
	(Content._answer_control): Method removed.
	(Task): Don't derive from `Content' (just `object').
	(_ChoiceTask): New class.
	(Selection, MultipleChoiceQuestion, TrueFalseStatement): Derive
	from `_ChoiceTask'.
	(Selection._format_choice, Selection._choice_controls)
	(Selection.export, TrueFalseStatement._format_choice)
	(TrueFalseStatement.export, ClozeTask._make_field)
	(ClozeTask._export_text, ClozeTask.export)
	(TransformationTask.export): All removed.
	(ClozeTask, TransformationTask, Selection, TrueFalseStatement,
	(MultipleChoiceQuestion, GapFillStatement): Don't take parent as
	constructor argument.

	(Exercise.task_type): New method.
	(Exercise.task_type): New Method.
	(Exercise.export): Use it.
	(Exercise._export_task) New method.
	(Exercise._export_instructions): Use `Content._button' and
	`Content._script_write()' for rendering the controls.
	(Exercise.__init__): Require the script `exercises.js'.
	(Cloze._export_tasks): Use `Content._button' and
	`Content._field()' and `Content._script_write()' for rendering the
	controls.
	(Cloze._make_field): New method.
	(Cloze._export_task): New method.
	(_ChoiceBasedExercise): New class.
	(TrueFalseStatements, MultipleChoiceQuestions, Selections) 
	(GapFilling): Derive from `_ChoiceBasedExercise'.
	(Dictation._export_task): New method.

	(TransformationTask.orig): New method.
	(ClozeTask.text): New method.
	
2004-10-21  Tomas Cerha  <cerha@brailcom.org>

	* resources/css/default.css: New styles added.

	* lcg/export.py (Exporter._export_node): Pass the exported content
	to `self._wrap_content()'.
	(Exporter._wrap_content, StaticExporter._wrap_content): Take the
	exported content as an argument.

	* lcg/content.py (Content._script_write): New method.
	(Content._speaking_text): New method.
	(Content._answer_control): New method.
	(VocabList.export): Use self._speaking_text() to render the
	english word.
	(VocabItem.__init__): The `sound_file' arguemtnt renamed to `media'.
	(Selection._format_choice): New method.
	(Selection._choice_controls): Use `self._format_choice()' to
	format the choice.
	(Selection._export_choices): Render choices as a div with separate
	lines, rather than
	an ordered list.
	(MultipleChoiceQuestion.export): Enclose the whole task in a
	paragraph (including the choices).
	(TrueFalseStatement._format_choice): New method.
	(TrueFalseStatement._export_choices): Return the controls just as
	they are, without any aditional formatting.
	(Exercise.export): Wrap all the tasks in a form.  Pass the form
	name to `self._export_tasks()'.
	(Exercise._export_tasks): Take the `form_name' argument.
	(Exercise._export_instructions): Use `self._script_write()' to
	format the recording controls compatible also with non-javascript
	enabled browsers.
	(Cloze._export_tasks): Take the `form_name' argument.  Prefix the
	onClick handler with "javascript: ".
	(Cloze._export_tasks): Don't wrap the tasks in a form.
	(TrueFalseStatements._instructions): Cosmetic changes.
	(Selection._export_choices): Method removed.
	(TrueFalseStatement._export_choices): Method removed.
	(Selection.export): Don't use `self._export_choices()'.
	(MultipleChoiceQuestion.export): Don't use `self._export_choices()'.
	(TrueFalseStatement.export): New method.

2004-10-20  Tomas Cerha  <cerha@brailcom.org>

	* Makefile (all): Don't pass the stylesheet argument to the
	generator script.
	(sync-data): Directories fixed.

	* lcg/course.py (ContentNode.__init__): New argument `default_resource_dir'.
	(ContentNode.default_resource_dir): New method.
	(Resource.source_file): If the source file does not exist, try the
	`default_resource_dir' directory.
	(Resource.name): New method.
	(Media.name): Moved to parent class.

	* lcg/content.py (Cloze.__init__): The script name changed to
	`exercises.js'.
	(VocabItem.__init__, Choice.__init__)
	(MultipleChoiceQuestion.__init__, TrueFalseStatement.__init__)
	(ClozeTask.__init__, TransformationTask.__init__)
	(Exercise.__init__): Use `isinstance()' for type assertions
	/`StringTypes' for strings and BooleanType' for boolean data/.
	Convert string values to unicode.

	* resources/scripts/exercises.js: New file.

	* resources/scripts/audio.js: New file.

	* resources/css/default.css: New file.

	* lcg/export.py (StaticExporter._wrap_content): Don't export the
	MediaPlayer object.
	(StaticExporter._wrap_content): Alocate the stylesheet only if
	it is not None.

2004-10-19  Tomas Cerha  <cerha@brailcom.org>

	* TODO: New file.

	* COPYING: New file.

	* Makefile (sync-data): New target.
	(sync): New target.

	* lcg/export.py (Exporter._export_node): Convert the contents to
	UTF-8 before writing the file.
	(StaticExporter._wrap_content): Set the charset to UTF-8.  Include
	the Media Player object in the header to make it available in MSIE.

	* lcg/feed.py (ExcelVocabFeeder._CHARSET): New constant.
	(ExcelVocabFeeder.feed): Convert the translation to unicode.

	* lcg/content.py (VocabItem.__init__): Accept also a unicode
	string as a `translation' arg.
	(Exercise.__init__): Allocate the dependency on the `audio.js'
	script.
	(Transformation._instructions): Unwanted backslash removed.

	* lcg/content.py (Exercise._export_instructions): Format the
	Recording launcher as a button, rather than a link.

2004-10-18  Tomas Cerha  <cerha@brailcom.org>

	* lcg/export.py (StaticExporter._hotkey): Use just numbers as
	shortcut keys.

	* lcg/course.py (Media.name): New method.

	* lcg/content.py (Transformation._instructions): New method.

2004-10-05  Tomas Cerha  <cerha@brailcom.org>

	* lcg/content.py (TrueFalseStatement.export): New method.
	(ClozeTask._export_text): New method.
	(ClozeTask.export): Use it.
	(TransformationTask._make_field): Method removed.
	(TransformationTask.__init__): New method.
	(TransformationTask.export): New method.

	* lcg/feed.py (ExcelVocabFeeder_LANGUAGE_ORDER): Spanish added.
	(ExerciseFeeder._read_transformation): Make sure that there are
	just two lines.  Pass each line as a separate argument to
	`TransformationTask' constructor.

	* doc/manual.wiki: Exercise names updated.  New exercise types
	added.  Task type descriptions moved to the descriptions of
	corresponding exercise types.

2004-10-04  Tomas Cerha  <cerha@brailcom.org>

	* lcg/feed.py (ExerciseFeeder._read_task): Honour the name change
	`Cloze' -> `ClozeTask' and `Transformation' ->
	`TransformationTask'.
	(ExerciseFeeder._read_cloze): Honour the name change `Cloze' ->
	`ClozeTask'.
	(ExerciseFeeder._read_transformation): Honour the name change
	 `Transformation' -> `TransformationTask'.

	* lcg/content.py (Selection.export): Don't wrap the choices into a
	paragraph.
	(MultipleChoiceQuestion.export): Don't include the choices in the
	paragraph, leave there just the question.
	(Cloze): Renamed to `ClozeTask'.
	(ClozeTask.__init__): Honour the change `Cloze' -> `ClozeTask'.
	(Transformation): Honour the change `Cloze' -> `ClozeTask'.
	(Transformation): Renamed to `TransformationTask'.
	(TransformationTask._make_field): Honour the change
	`Transformation' -> `TransformationTask'.
	(Exercise.__init__): New optional arguments `sound_file' and
	`transcript'.  Initialize the corresponding media object if a
	`sound_file' specified.
	(Exercise._header): If `self._name' is Null, take the name from
	class name.
	(ListeningExercise): Class removed.
	(Exercise._export_instructions): If `sound_file' was specified in
	constructor, include the link to play the recording.
	(ClozeTest): Renamed to `Cloze'.
	(Cloze_task_type): Honour the change `Cloze' -> `ClozeTask'.
	(Cloze_name): Removed.
	(Cloze.__init__): Honour the change `ClozeTest' -> `Cloze'.
	(Cloze._instructions): Return different instructions when the
	`sound_file' was specified at constructor.
	(Cloze._export_tasks): Use the 'action' attribute for the <form>
	tag.
	(ListeningClozeTest): Class removed.
	(TrueFalseExercise): Renamed to `TrueFalseStatements'.
	(TrueFalseComprehensionExercise): Class removed.
	(MultipleChoiceExercise): Renamed to `MultipleChoiceQuestions'.
	(MultipleChoiceQuestions._name): Removed.
	(MultipleChoiceComprehensionExercise): Class removed.
	(SelectionExercise): Renamed to `Selections'.  Honour the parent
	class name change.
	(ListeningSelectionExercise): Class removed.
	(GapFillingExercise): Renamed to `GapFilling'.  Honour the parent
	class name change.
	(GapFilling._name): Removed.
	(SentenceCompletionExercise): Renamed to `SentenceCompletion'.
	Honour the parent class name change.
	(SentenceCompletion._name): Renmoved.
	(TransformationExercise): Renamed to `Transformation'.  Honour the
	parent class name change.
	(Transformation._task_type): Honour the change `Transformation' ->
	`TransformationTask'.
	(Transformation._name): Removed. 
	(Dictation): Honour the change `ClozeTest' -> `Cloze'.
	(Dictation._name): Removed. 

	* lcg/export.py (StaticExporter._wrap_content): Added support for
	http-equiv meta tags and encoding specified.  Don't forget to
	close the <script> header tag.  Use the 'type' attribute with the
	<script> tag.

2004-10-01  Tomas Cerha  <cerha@brailcom.org>

	* lcg/content.py
	(Selection): New class based on `MultipleChoiceQuestion'
	implementation.
	(MultipleChoiceQuestion): Derive from `Selection' and only extend
	the cnostructor and the `export()' method with the question.
	(TrueFalseStatement._export_choices): Respect the changes in
	parent class.
	(Cloze._REGEXP): New constant.
	(Cloze.__init__): Don't allocate the resources (media and
	scripts).
	(Cloze.answers): New method.
	(Cloze._make_field): Don't add the word to self._answers().
	(Cloze.export): Don't export anything related to the form.  Export
	just a paragraph of text with input fields.
	(Transformation): New class.
	(Exercise._export_tasks): New method.
	(Exercise.export): Use it.
	(ListeningExercise.__init__): Read the transcript file and use it
	as `tts_input' argument for the created `Media' object.
	(ClozeTest.__init__): Allocate the media and script for exercise
	evaluation.
	(ClozeTest._instructions): New method.
	(ClozeTest._export_tasks): Export also a form and controls for
	exercise evaluation.
	(ListeningClozeTest): New class.
	(SelectionExercise): New class.
	(ListeningSelectionExercise): New class.
	(GapFillingExercise._instructions): Text updated.
	(MultipleChoiceExercise._instructions): Text updated.
	(SentenceCompletionExercise): New class.
	(TransformationExercise): New class.
	(Dictation): New class.

	* lcg/export.py (Exporter._export_resource): Escape apostrophes in
	a TTS input.
	(StaticExporter._wrap_content): Don't use the `type' attribute for a
	`script' tag (doesn't work with Mozilla).

	* lcg/course.py (ContentNode.lang): New method.

	* lcg/feed.py (ExcelVocabFeeder._LANGUAGE_ORDER): New constant.
	(ExcelVocabFeeder.feed): Assertion for parent language existence
	in `self._LANGUAGE_ORDER'.
	(ExcelVocabFeeder.feed): Search the translation according to
	parents language and the `_LANGUAGE_ORDER' constant.  Don't
	require all the columns to exist (but report missing
	translations).
	(ExerciseFeeder._read_task): Add a mapping for `Selection' type
	task.
	(ExerciseFeeder._process_choices): Don't expect the statement in
	the input, unpack just the choices.  Take the sequence of lines as
	argument instead of multiline text.
	(ExerciseFeeder._read_selection): Nová metoda.
	(ExerciseFeeder._read_multiple_choice_question)
	(ExerciseFeeder._read_gap_fill_statement): Split the text to lines
	and treat the question/statement separately.  Process only the
	remaining lines with `_read_selection()'.
	(ExerciseFeeder._read_task): New mapping for `Transformation'.
	(ExerciseFeeder._read_transformation): New method'

2004-09-24  Tomas Cerha  <cerha@brailcom.org>

	* lcg/ims.py (_Manifest._create_item): Use
	`ContentNode.resources()' instead of `ContentNode.list_media()'.
	Use `self._export_resource()' instead of
	`ContentNode._export_media()'.

	* lcg/export.py (Exporter._export_node): Use
	`ContentNode.resources()' instead of `ContentNode.list_media()'.
	Use `self._export_resource()' instead of
	`ContentNode._export_media()'.
	(Exporter._export_media): Renamed to
	`Exporter._export_resource()'.
	(Exporter._export_resource): Do the TTS only for Media instances.
	(StaticExporter._wrap_content.tags): New function.
	(StaticExporter._wrap_content): Use it instead of `self._meta()'
	and `self._links()'.  Include HTML head tags for all `Script' and
	`Stylesheet' instances this node depends on.
	(StaticExporter._meta): Method removed.
	(StaticExporter._links): Method removed.
	(StaticExporter.export): Method removed.
	(StaticExporter._wrap_content): Set the `language' attribute of
	the header `script' tag.

	* lcg/course.py: Docstring updated.
	(ContentNode): Docstring updated.
	(ContentNode.__init__): Docstring updated.
	(ContentNode._media: Renamed to `_resources'.
	(ContentNode._read_resource): Renamed to `_read_file'.
	(ContentNode.list_media): Renamed to `resources'.  New argument
	cls to filter the returned list.
	(ContentNode._resource): New method.
	(ContentNode.media): Use it.
	(ContentNode.script): New method.
	(ContentNode.stylesheet): New method.
	(TextNode._create_content, InnerNode._create_content)
	(InnerNode.title): `ContentNode._read_resource()' ->
	`ContentNode._read_file'.
	(Resource): New class (based on the Media code.
	(Media): Derive from it.  Most methods moved to Resource.
	(EurochanceCourse._create_children): Suppose only directories
	beginning with numbers as unit subdirectories.
	(Script, Stylesheet): New classes.

	* lcg/content.py (Cloze.__init__): Allocate media files for the
	evaluation response.
	(Cloze._form_name): Method removed.
	(Cloze._script.check): Function removed.
	(Cloze._script): Make the evaluation function generic, taking the
	form and correct answers as arguments.  Play a response sound
	after evaluation.  Mark incorrect answers by an exclamation mark.
	(Cloze.export): Pass the form name and correct answers as an
	argument to a Javascript evaluation function.
	(Cloze.__init__): Don't store the media in attributtes, just
	allocate the dependency as well as the new dependency for the
	Javascript code `eval-cloze.js'.
	(Cloze._script): Method removed.
	(Cloze.export): Don't use the removed `_script()' method.

2004-09-23  Tomas Cerha  <cerha@brailcom.org>

	* Makefile (all): Pass a stylesheet filename to the generator.

	* bin/generate.py (course): Take the stylesheet name as a third
	argument and pass it to the StaticExporter constructor.

	* lcg/content.py (Cloze.__init__): Initialize the variable
	`self._answers'.
	(Cloze._make_field): Don't set fields style at all.  Store the
	words in the `self._answers' array.
	(Cloze._form_name): New method.
	(Cloze._script.check): New method.
	(Cloze.export): Include also the evaluate button and the
	Javascript code to evaluate the results.
	(Exercise._header): New method.
	(Exercise.export): Use it.

	* lcg/export.py (StaticExporter.__init__): New method.
	(StaticExporter._wrap_content): Add a stylesheet link to the
	header if a stylesheet is defined.  Set the class of the `<hr>'
	tag to separate the nevigation.  Don'd set the bgcolor body
	attributte.  Wrap the content in a div.
	(StaticExporter._div): New method.
	(StaticExporter._navigation): Wrap the result in a div.
	(StaticExporter._toc): Wrap the result in a div.
	(StaticExporter.export): New method (copy the stylesheet file
	after exporting).
	(StaticExporter._wrap_content): Add the `next' and `prev' `link'
	tags to the header.  Add an anchor with an accesskey to the
	beginning of the contents.
	(StaticExporter._hotkey): New variable. 
	(StaticExporter._links): New method. 
	(StaticExporter._navigation): Add hotkeys to the links.
	(StaticExporter._link): New keyword argument 'key'.

2004-09-03  Tomas Cerha  <cerha@brailcom.org>

	* lcg/export.py (StaticExporter._link): New method.
	(StaticExporter._navigation): Use it.  Also create a link to
	parent node when it's not a root node.

	* lcg/course.py (ContentNode.parent): New method.
	(Media.source_file): Cosmetic improvements. 

2004-09-01  Tomas Cerha  <cerha@brailcom.org>

	* lcg/export.py (StaticExporter._toc): New method.
	(StaticExporter._make_toc): New method.
	(StaticExporter._wrap_content): Use self._toc().

	* lcg/content.py (TableOfContents): Class removed.

	* Makefile: Remove the html files before running the generator.
	Don't zip the package.  Export the `LCG_TTS_COMMAND' variable.

	* lcg/course.py (ContentNode.linear, ContentNode.next) 
	(ContentNode.prev): Docstring written.
	(ContentNode.index): New method.
	(ContentNode._node_path): New method.
	(ContentNode._id): New method.
	(ContentNode.id): Don't use the subdir to construct the id, use
	concatenating the hierarchy of `self._id()'.
	(ContentNode.full_title): Use `self._node_path()'.
	(ContentNode.counter): Docstring updated.
	(NumberedNode): Class removed.
	(Course.output_file): Method removed.
	(Unit): Inherit `InnerNode', not `NumberedNode'.
	(Unit._id): New method.
	(Unit.title): New method.
	(EurochanceCourse._create_children): Don't create the counter for
	counting NumberedNode's number.
	(ContentNode.__str__): Don't report the `output_file'.
	(Course): Renamed to `RootNode'.
	(RootNode.__init__): Honour the name change.
	(Media.__init__): Docstring updated.
	(EurochanceCourse): `Course' -> `RootNode'.
	(RootNoode._create_content): Method removed. 

2004-08-31  Tomas Cerha  <cerha@brailcom.org>

	* bin/generate.py: Use the `StaticExporter' to export the content.

	* lcg/__init__.py: Import also the  modules `export' a `ims'.

	* lcg/course.py: Module docstring updated.
	(ContentNode): Docstring updated.
	(ContentNode._export): Method removed.
	(full_title): Method removed.
	(ContentNode.content): New method.
	(export): Method removed.
	(Course): Docstring updated.
	(_export): Method removed.
	(Media._source_file): Renamed to `source_file()'.
	(Media._destination_file): Renamed to `destination_file()'.
	(Media.__init__, Media.url): Honour the change above.
	(Media.export): Method removed.
	(ContentNode.__str__): Report `subdir' instead of `src_dir'.
	(ContentNode.__str__): Use
	(ContentNode.linear): New method.
	(ContentNode.next): New method.
	(ContentNode.prev): New method.
	(ContentNode.subdir): New method.
	(ContentNode.dst_dir): Method removed.
	(ContentNode.src_dir): Construct the path out of root nodes
	`src_dir' and the `subdir'.
	(ContentNode.id): Make the id out of name and `subdir'.
	(ContentNode.full_title): New method.
	(ContentNode.meta): New method.
	(Course.output_file): Don't use `self.dst_path()'.
	(Media.shared_directory): Renamed to `SUBDIRECTORY'.
	(Media.source_file): `self.shared_directory' ->
	`self.SUBDIRECTORY'.
	(Media.destination_file): Put all media files into one directory,
	with a subdirectory for each node.
	(EurochanceCourse._create_children): New method.

	* lcg/ims.py (Manifest): Renamed to `_Manifest'. 
	(IMSExporter): New class.

	* lcg/export.py (Module): New module.
	(Exporter._full_title): Method removed.
	(Exporter._export_node): Put all files into the same directory.
	(Exporter._wrap_content): Use `node.full_title()' instead of
	`self._full_title()'.
	(Exporter._export_media): Don't take the `dir' argument.  Use
	`self._dir' instead.
	(StaticExporter._wrap_content): Print the doctype, meta
	information, title header and navigation.
	(StaticExporter._wrap_content): New method.
	(StaticExporter._wrap_content): New method.

2004-06-25  Tomas Cerha  <cerha@brailcom.org>

	* lcg/course.py (Media.export): Set the `cmd' to None first.

2004-06-24  Tomas Cerha  <cerha@brailcom.org>

	* lcg/course.py (Media.export): Use the LCG_TTS_COMMAND
	environment variable.  If not set, don't try to synthesize the text.

2004-06-23  Tomas Cerha  <cerha@brailcom.org>

	* Makefile: Set the `LCG_TTS_COMMAND' environment variable.

2004-05-21  Tomas Cerha  <cerha@brailcom.org>

	* doc/structure.wiki: Finished.

	* doc/manual.wiki: Finished.

2004-05-20  Tomas Cerha  <cerha@brailcom.org>

	* doc/manual.wiki: New file.

	* doc/structure.wiki: New file.

	* doc/roles.wiki: New file.

2004-05-14  Tomas Cerha  <cerha@brailcom.org>

	* lcg/util.py (SplittableText): New class.

	* lcg/_test.py (SplittableText): New set of tests.

	* lcg/feed.py: Import the Python module `traceback'.  Import `util'.
	All commented-out classes at the end of file removed.
	(Feeder.__init__): New method.
	(Feeder._input_file): New method.
	(PySpecFeeder): More documentation added.
	(PySpecFeeder._input_file): New method.
	(PySpecFeeder.__init__): Method removed.
	(PySpecFeeder._get_module): Use `self._file' instead of
	`self._name'.
	(ExcelVocabFeeder.__init__): Method removed.
	(ExcelVocabFeeder.feed): Use `self._input_file()'
	(ExerciseFeeder): New class.
	(ExerciseFeeder_PieceOfText): Removed.
	(ExerciseFeeder.feed): Use `SplittableText' instead of
	`self._PieceOfText'.
	(ExerciseFeeder._exercise, ExerciseFeeder._read_task): Use the
	`traceback' module for printing tracebacks instead of
	`code.InteractiveInterpreter'.
	(ExerciseFeeder._read_header): Docstring added.  Assertion message
	simplified.

	* lcg/course.py (ContentNode._read_resource): Don't use the language
	extension for filenames.
	(Module): Class removed.
	(Exercises._create_content): Use `ExerciseFeeder' instead of
	`PySpecFeeder'.
	(Unit._create_children): Act as the removed `Module' node
	according to course structure changes.
	(EurochanceCourse): Documentation updated.
	(EurochanceCourse._create_children): Create just a sequence of `Unit's.

	* lcg/content.py (Exercise.__init__): Report the actual `tasks' value
	in assertion error message..
	(Exercise.task_type): New method.
	(ComprehensionExercise.__init__): Method removed.
	(ClozeTest.__init__): Method removed.
	(ClozeTest._task_type): Set.
	(Container.__init__, GenericText.__init__, VocabList.__init__)
	(MultipleChoiceQuestion.__init__, Cloze.__init__)
	(Exercise.__init__, ComprehensionExercise.__init__): Call parent
	constructor prior to everyting else.

	* lcg/__init__.py: Update globals for module `feed' as well.

2004-05-04  Tomas Cerha  <cerha@brailcom.org>

	* lcg/_test.py (ContentNode.check_misc): Check also the methods
	`counter()', `id()' and `children()'.

	* lcg/course.py (ContentNode._create_content) 
	(ContentNode._create_children): More documentation added.
	(ContentNode._register_child): New method.
	(ContentNode.__init__): Use it.
	(Course): Docstring improved.
	(ContentNode._create_children): Docstring improved.
	(ContentNode._create_content): Docstring improved.
	(ContentNode): Docstring improved.

2004-05-03  Tomas Cerha  <cerha@brailcom.org>

	* lcg/_test.py (Module): Import `lcg' and `os', not `lesson'.
	(ContentNode): New class
	(Client): Class removed.
	

	* lcg/course.py (Module): Code reorganized to separate the general
	classes from the classes implementing concrete Eurochance Course
	structure.
	(EurochanceCourse): New class.
	(Course._create_children): Method moved to the new
	`EurochanceCourse' class.
	(Course.__init__): Unused argument `lang' removed.
	(NumberedNode.__init__, Course.__init__): Use `super()' to call
	the constructor of parent class.
	(ContentNode.src_dir): Return just the subdir if parent is None.
	(ContentNode.dst_dir): Return just the subdir if parent is None.
	(Course.output_file): New method.
	(dst_dir): Method removed.

	* lcg/util.py (list_subdirs): Ignore `CVS' directories.

	* Makefile: New target `test'.

	* bin/generate.py: Use `EurochanceCourse' instead of `Course'.
	Don't use the `lang' argument.

