# -*- coding: utf-8; mode: structured-text -*-
# Copyright (c) 2005, 2006 Brailcom, o.p.s.
# This is part of the LCG Documentation.
# See the file index.en.txt for copying conditions.

= The Generic Interface =

The /Generic Interface/ is the simplest way to use the LCG.  It is ideal for
publications with a hierarchical structure, such as manuals, help systems and
simple e-learning courses.  When the format described below doesn't suit your
needs, consider using [custom-interface].

The basic concept is based on files arranged into a directory tree according to
the logical structure of the publication.  The files are read by the LCG and
the corresponding content hierarchy is built in the computer memory in an
independent internal representation.  Then this model is exported into one of
the supported output formats.

An important restriction of the Generic Interface is that all source files are
supposed to be in the [structured-text] format.  This format is the most
generic one, so in most cases it is ok, but if you want to use LCG's other
features, such as generating interactive exercises for e-learning applications,
you will have to use the [custom-interface].

Index: @TOC@


== Terminology ==

We use the following terminology in the text below:

Publication
  A general term for the whole hierarchy of documents, which together make the
  manual, e-learning course, help system or whatever you are using the LCG for.

Node 
  A node represents one document within the hierarchy.  This may be a
  chapter of a book, unit of a course or any other logically complete unit of
  the material.  A publication is a hierarchy of nodes.  Each node has a unique
  identifier.

Content
  Each node contains some actual text.  LCG recognizes the logical structure of
  the content.  Thus we have a hierarchy of content elements, such as sections,
  paragraphs, itemized lists, code samples, tables, images etc.


== Organization of the Source Data ==

There is just one /source directory/, which contains files and subdirectories,
which are read recursively.

The following rules apply:

  * The root node is located first.  By default, the root node's identifier is
    'index', but any other id can be passed (see [#run]).
 
  * The list of child nodes is built.  In short, a child node is created for
    each file or directory found in the source directory, which has a
    suitable name (see [#names]).

  * A file represents a leave node (it has no chldren).  The node's id is the
    base name of this file.  Node's content is read from the file in the
    [structured-text] format.  When multiple language variants of the file
    exist, [#language-selection] is performed.

  * A directory represents a node with children.  The node's id is the name of
    this directory.  The node's content is read from the file of the same name
    within this directory, plus the suffix (eg. =intro/intro.txt=).  All other
    files and directories within the directory are child nodes of this node.
    The process starts recursively as for the root node.

  * It is possible to enforce the order and visibility of nodes using the
    [#index-file].

Files within the whole directory structure must have unique names, since they
are used as node identifiers.  This also means that it is possible to refer to
any node using it's id, without caring where in the hierarchy it is located.


=== File and Directory Name Restrictions === names

A valid /source directory/ name is any name, which doesn't begin with a dot or
an underscore.  Also 'CVS' directories are ignored.

A valid /source file/ must have the source file suffix.  This is '.txt' by
default, but any other suffix can be passed (see [#run]).  Filenames beginning
with a dot, an underscore and ending with a tilde are ignored.


=== Index File === index-file

The nodes are ordered alphabetically by default, but the order can be also
defined explicitly using a file named '\_index.txt', which contains the list of
child node identifiers one per line.  

Nodes, which don't appear in the index file, but for which an input file is
found, are still created, however they are considered "hidden" and thus they
don't appear in the table of contents.

Empty lines and lines beginning with a hash ('#') are ignored.


=== Language Selection === language-selection

If you specify a language, when running LCG, the LCG will try to locate the
input file variant, which matches given language.  Language is specified using
an ISO 639-1 Alpha-2 language code.  The matching input file will have the
corresponding suffix, before the file type suffix.  Thus for example
'index.en.txt' is the prefered input file for the node 'index'.  When no such
file exists, the file 'index.txt' is used.


== Running LCG == run

The /Generic Interface/ is implemented with the =lcgmake.py= program, which
comes with the LCG.  Launch it with the =--help= argument to see the supported
options:

-----
lcgmake.py --help
-----
